implementationroute{foreveryiteminchildrenofme=>child{foreveryiteminoutputQueueofchild.runnable=>output_message{synonymmessage=output_message{findconnectioninmegivenchildXmessage.etag=>connection{lockreceiversofconnection{foreveryreceiversinconnection=>dest{synonymparams={me,dest,message}{cond{dest.component!=me{@deliver_to_child_input<=params}}{dest.component==me{@deliver_to_me_output<=params}}}}}}}}{@child.runnable.resetOutputQueue}}}syncdeliver_to_child_input<=me,dest,message{varinput_message<={dest.etag,message.data}{lookupdest.component=>receiver{@receiver.enqueueInput<=input_message}}}syncdeliver_to_me_output<=me,dest,message{varoutput_message<={receiver.etag,message.data}{@me.enqueueInput<=output_message}}
